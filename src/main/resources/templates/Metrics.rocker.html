@option discardLogicWhitespace=false
@import java.util.*
@import java.util.concurrent.atomic.AtomicReference
@import com.alibaba.dubbo.monitor.dubbo.Statistics
@args (Map<Statistics, AtomicReference<long[]>> providerStatistics, Map<Statistics, AtomicReference<long[]>> consumerStatistics)
@for (( stat, metricsRef) : providerStatistics) {
@with (application = stat.getApplication(),service = stat.getService(), method = stat.getMethod(), server = stat.getServer(), client = stat.getClient(), metrics=metricsRef.get()){
# HELP dubbo_provider_success_count Total successful invocation count, provider view
# TYPE dubbo_provider_success_count counter
dubbo_provider_success_count{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[0]
# HELP dubbo_provider_failure_count Total failed invocation count, provider view
# TYPE dubbo_provider_failure_count counter
dubbo_provider_failure_count{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[1]
# HELP dubbo_provider_input_bytes Total input message size, provider view
# TYPE dubbo_provider_input_bytes counter
dubbo_provider_input_bytes{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[2]
# HELP dubbo_provider_output_bytes Total output message size, provider view
# TYPE dubbo_provider_output_bytes counter
dubbo_provider_output_bytes{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[3]
# HELP dubbo_provider_elapsed_ms Total elapsed milliseconds during invocation, provider view
# TYPE dubbo_provider_elapsed_ms counter
dubbo_provider_elapsed_ms{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[4]
# HELP dubbo_provider_concurrent_requests Instant concurrent request, provider view
# TYPE dubbo_provider_concurrent_requests gauge
dubbo_provider_concurrent_requests{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[5]
# HELP dubbo_provider_input_bytes_max Max input message size, provider view
# TYPE dubbo_provider_input_bytes_max gauge
dubbo_provider_input_bytes_max{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[6]
# HELP dubbo_provider_output_bytes_max Max output message size, provider view
# TYPE dubbo_provider_output_bytes_max gauge
dubbo_provider_output_bytes_max{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[7]
# HELP dubbo_provider_elapsed_ms_max Max elapsed milliseconds during invocation, provider view
# TYPE dubbo_provider_elapsed_ms_max gauge
dubbo_provider_elapsed_ms{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[8]
# HELP dubbo_provider_concurrent_requests_max Max instant concurrent request, provider view
# TYPE dubbo_provider_concurrent_requests_max gauge
dubbo_provider_concurrent_requests_max{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[9]
}
}
@for (( stat, metricsRef) : consumerStatistics) {
@with (application = stat.getApplication(),service = stat.getService(), method = stat.getMethod(), server = stat.getServer(), client = stat.getClient(), metrics=metricsRef.get()){
# HELP dubbo_consumer_success_count Total successful invocation count, consumer view
# TYPE dubbo_consumer_success_count counter
dubbo_consumer_success_count{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[0]
# HELP dubbo_consumer_failure_count Total failed invocation count, consumer view
# TYPE dubbo_consumer_failure_count counter
dubbo_consumer_failure_count{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[1]
# HELP dubbo_consumer_input_bytes Total input message size, consumer view
# TYPE dubbo_consumer_input_bytes counter
dubbo_consumer_input_bytes{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[2]
# HELP dubbo_consumer_output_bytes Total output message size, consumer view
# TYPE dubbo_consumer_output_bytes counter
dubbo_consumer_output_bytes{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[3]
# HELP dubbo_consumer_elapsed_ms Total elapsed milliseconds during invocation, consumer view
# TYPE dubbo_consumer_elapsed_ms counter
dubbo_consumer_elapsed_ms{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[4]
# HELP dubbo_consumer_concurrent_requests Instant concurrent request, consumer view
# TYPE dubbo_consumer_concurrent_requests gauge
dubbo_consumer_concurrent_requests{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[5]
# HELP dubbo_consumer_input_bytes_max Max input message size, consumer view
# TYPE dubbo_consumer_input_bytes_max gauge
dubbo_consumer_input_bytes_max{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[6]
# HELP dubbo_consumer_output_bytes_max Max output message size, consumer view
# TYPE dubbo_consumer_output_bytes_max gauge
dubbo_consumer_output_bytes_max{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[7]
# HELP dubbo_consumer_elapsed_ms_max Max elapsed milliseconds during invocation, consumer view
# TYPE dubbo_consumer_elapsed_ms_max gauge
dubbo_consumer_elapsed_ms{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[8]
# HELP dubbo_consumer_concurrent_requests_max Max instant concurrent request, consumer view
# TYPE dubbo_consumer_concurrent_requests_max gauge
dubbo_consumer_concurrent_requests_max{dubbo_application="@application",service="@service",method="@method",server="@server",client="@client"} @metrics[9]
}
}